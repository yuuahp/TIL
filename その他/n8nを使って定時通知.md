# n8nを使ってDiscordに定時通知をする

## 🌐環境

Ubuntu Desktop 20.04

## 📑n8nとは


プロセス自動化ツール。
IFTTTのセルフホスト版みたいなやつです。

## ▶やり方

### 01.n8nをインストール

ターミナルから`npm i n8n`を実行します。  
しばらく待つとn8nがインストールされます。  

### 02.n8nを実行

ターミナルから`n8n`を実行します。  
起動が完了したら`o`キーでブラウザを開くことができます。  
ポート5678で外部からアクセスすることもできます。  
次回から自動で起動したい場合は  
`/Ubuntu/Systemdを使わずに自動起動する.md`の方法で自動化することができます。    

### 03.Workflowを作る

右上の`+`ボタンからTriggerタブの`Cron`ノードとRegularタブの`Discord`ノードを  
画面中央にD&Dします。  
そして`Cron`の右の〇を`Discord`の左の〇にD&Dします。  

#### Cronノードの設定

Cronノードをダブルクリックして`Add Cron Time`をクリックします。  
いろいろな時刻ルールが設定できるのでお好みで設定します。  
⚠私の環境では設定した時刻より2時間遅れるというバグがありました  
~~2時間前に設定して解決しました。 ~~ 

#### Discordノードの設定

- `Webhook URL:[https://discord.com/api/webhooks/XXXXXXXXXXXXXXXXXX]`  

DiscordでWebhookを作ってURLを入力します。  

- `Text:[TIL書け！] `   

送りたいテキストを入力します。  

### 04.保存&実行

`Ctrl+S`で保存します。初回だった場合は名前をつけましょう。  
そして**右上の`Active`を押します。**  
これが押されていないと実行されません。  
指定の時刻で実行されていれば成功です。  
(＾o＾)ﾉ ｲｴｰ!